<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Google Cloud Text-to-Speech API • googleLanguageR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Google Cloud Text-to-Speech API">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47480439-2', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">googleLanguageR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/translation.html">
    <span class="fa fa-globe fa-lg"></span>
     
    Translation API
  </a>
</li>
<li>
  <a href="../articles/nlp.html">
    <span class="fa fa-object-group fa-lg"></span>
     
    NLP API
  </a>
</li>
<li>
  <a href="../articles/speech.html">
    <span class="fa fa-comment fa-lg"></span>
     
    Speech API
  </a>
</li>
<li>
  <a href="../articles/text-to-speech.html">
    <span class="fa fa-phone fa-lg"></span>
     
    Text-to-Speech API
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">
        <span class="fa fa-info"></span>
         
        Function Reference
      </a>
    </li>
    <li>
      <a href="https://cloud.google.com/products/machine-learning/">
        <span class="fa fa-google"></span>
         
        Google Documentation
      </a>
    </li>
    <li>
      <a href="https://github.com/ropensci/googleLanguageR">
        <span class="fa fa-github"></span>
         
        Development site
      </a>
    </li>
    <li>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSerjirmMpB3b7LmBs_Vx_XPIE9IrhpCpPg1jUcpfBcivA3uBw/viewform">
        <span class="fa fa-slack"></span>
         
        Slack Support Channel
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Google Cloud Text-to-Speech API</h1>
                        <h4 class="author">Mark Edmondson</h4>
            
            <h4 class="date">2018-04-05</h4>
      
      
      <div class="hidden name"><code>text-to-speech.Rmd</code></div>

    </div>

    
    
<p>Google Cloud Text-to-Speech enables developers to synthesize natural-sounding speech with 30 voices, available in multiple languages and variants. It applies DeepMind’s groundbreaking research in WaveNet and Google’s powerful neural networks to deliver the highest fidelity possible. With this easy-to-use API, you can create lifelike interactions with your users, across many applications and devices.</p>
<p>Read more <a href="https://cloud.google.com/text-to-speech/">on the Google Cloud Text-to-Speech Website</a></p>
<p>The Cloud Text-to-Speech API turns text into sound files of the spoken words. Its accessible via the <code>gl_talk</code> function.</p>
<p>Arguments include:</p>
<ul>
<li>
<code>input</code> - The text to turn into speech</li>
<li>
<code>output</code> Where to save the speech audio file</li>
<li>
<code>languageCode</code> The language of the voice as a <a href="https://tools.ietf.org/html/bcp47"><code>BCP-47</code> language tag</a>
</li>
<li>
<code>name</code> Name of the voice, see list via <code><a href="../reference/gl_talk_languages.html">gl_talk_languages()</a></code> or <a href="https://cloud.google.com/text-to-speech/docs/voices">online</a> for supported voices. If not set, then the service will choose a voice based on <code>languageCode</code> and <code>gender</code>.</li>
<li>
<code>gender</code> The gender of the voice, if available</li>
<li>
<code>audioEncoding</code> Format of the requested audio stream - can be a choice of <code>.wav</code>, <code>.mp3</code> or <code>.ogg</code>
</li>
<li>
<code>speakingRate</code> Speaking rate/speed</li>
<li>
<code>pitch</code> Speaking pitch</li>
<li>
<code>volumeGainDb</code> Volumne gain in dB</li>
<li>
<code>sampleRateHertz</code> Sample rate for returned audio</li>
</ul>
<div id="returned-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#returned-structure" class="anchor"></a>Returned structure</h3>
<p>The API returns an audio file which is saved to the location specified in <code>output</code> - by default this is <code>output.wav</code> - if you don’t rename this file it will be overwritten by the next API call.</p>
<p>It is advised to set the appropriate file extension if you change the audio encoding (e.g. to one of <code>.wav</code>, <code>.mp3</code> or <code>.ogg</code>) so audio payers recognise the file format.</p>
</div>
<div id="talk-languages" class="section level3">
<h3 class="hasAnchor">
<a href="#talk-languages" class="anchor"></a>Talk Languages</h3>
<p>The API can talk several different languages, with more being added over time. You can get a current list via the function <code><a href="../reference/gl_talk_languages.html">gl_talk_languages()</a></code> or <a href="https://cloud.google.com/text-to-speech/docs/voices">online</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/gl_talk_languages.html">gl_talk_languages</a></span>()
<span class="co"># A tibble: 32 x 4</span>
   languageCodes name             ssmlGender naturalSampleRateHertz
   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">            </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                       </span><span class="er">&lt;</span>int<span class="op">&gt;</span>
<span class="st"> </span><span class="dv">1</span> es<span class="op">-</span>ES         es<span class="op">-</span>ES<span class="op">-</span>Standard<span class="op">-</span>A FEMALE                      <span class="dv">24000</span>
 <span class="dv">2</span> ja<span class="op">-</span>JP         ja<span class="op">-</span>JP<span class="op">-</span>Standard<span class="op">-</span>A FEMALE                      <span class="dv">22050</span>
 <span class="dv">3</span> pt<span class="op">-</span>BR         pt<span class="op">-</span>BR<span class="op">-</span>Standard<span class="op">-</span>A FEMALE                      <span class="dv">24000</span>
 <span class="dv">4</span> tr<span class="op">-</span>TR         tr<span class="op">-</span>TR<span class="op">-</span>Standard<span class="op">-</span>A FEMALE                      <span class="dv">22050</span>
 <span class="dv">5</span> sv<span class="op">-</span>SE         sv<span class="op">-</span>SE<span class="op">-</span>Standard<span class="op">-</span>A FEMALE                      <span class="dv">22050</span>
 <span class="dv">6</span> nl<span class="op">-</span>NL         nl<span class="op">-</span>NL<span class="op">-</span>Standard<span class="op">-</span>A FEMALE                      <span class="dv">24000</span>
 <span class="dv">7</span> en<span class="op">-</span>US         en<span class="op">-</span>US<span class="op">-</span>Wavenet<span class="op">-</span>A  MALE                        <span class="dv">24000</span>
 <span class="dv">8</span> en<span class="op">-</span>US         en<span class="op">-</span>US<span class="op">-</span>Wavenet<span class="op">-</span>B  MALE                        <span class="dv">24000</span>
 <span class="dv">9</span> en<span class="op">-</span>US         en<span class="op">-</span>US<span class="op">-</span>Wavenet<span class="op">-</span>C  FEMALE                      <span class="dv">24000</span>
<span class="dv">10</span> en<span class="op">-</span>US         en<span class="op">-</span>US<span class="op">-</span>Wavenet<span class="op">-</span>D  MALE                        <span class="dv">24000</span></code></pre></div>
<p>If you are looking a specific language, specify that in the function call e.g. to see only Spanish (<code>es</code>) voices issue:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/gl_talk_languages.html">gl_talk_languages</a></span>(<span class="dt">languageCode =</span> <span class="st">"es"</span>)
<span class="co"># A tibble: 1 x 4</span>
  languageCodes name             ssmlGender naturalSampleRateHertz
  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">            </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                       </span><span class="er">&lt;</span>int<span class="op">&gt;</span>
<span class="dv">1</span> es<span class="op">-</span>ES         es<span class="op">-</span>ES<span class="op">-</span>Standard<span class="op">-</span>A FEMALE                      <span class="dv">24000</span></code></pre></div>
<p>You can then specify that voice when calling the API via the <code>name</code> argument, which overrides the <code>gender</code> and <code>languageCode</code> argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"Hasta la vista"</span>, <span class="dt">name =</span> <span class="st">"es-ES-Standard-A"</span>)</code></pre></div>
<p>Otherwise, specify your own <code>gender</code> and <code>languageCode</code> and the voice will be picked for you:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"Would you like a cup of tea?"</span>, <span class="dt">gender =</span> <span class="st">"FEMALE"</span>, <span class="dt">languageCode =</span> <span class="st">"en-GB"</span>)</code></pre></div>
<p>Some languages are not yet supported, such as Danish. The API will return an error in those cases.</p>
</div>
<div id="browser-speech-player" class="section level3">
<h3 class="hasAnchor">
<a href="#browser-speech-player" class="anchor"></a>Browser Speech player</h3>
<p>Creating and clicking on the audio file to play it can be a bit of a drag, so you also have a function that will play the audio file for you, launching via the browser. This can be piped via the tidyverse’s <code>%&gt;%</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
<span class="kw"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"This is my audio player"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/gl_talk_player.html">gl_talk_player</a></span>()

## non-piped equivalent
<span class="kw"><a href="../reference/gl_talk_player.html">gl_talk_player</a></span>(<span class="kw"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"This is my audio player"</span>))</code></pre></div>
<p>The <code><a href="../reference/gl_talk_player.html">gl_talk_player()</a></code> creates a HTML file called <code>player.html</code> in your working directory by default.</p>
<div id="using-with-shiny" class="section level4">
<h4 class="hasAnchor">
<a href="#using-with-shiny" class="anchor"></a>Using with Shiny</h4>
<p>You can do this in Shiny too, which is demonstrated in the <a href="https://github.com/ropensci/googleLanguageR/tree/master/inst/shiny/capture_speech">example Shiny app</a> included with the package.</p>
<p>The pertinent HTML tags for your own Shiny apps are shown below - specify <code>autoplay</code> to have the audio play immediatly, or exclude if the user should push the play button to hear the audio.</p>
<p>Note the output audio file will be cached in the browser, so you should have a new name for the file (And delete the old ones) if you have changing text inputs.</p>
<p>You also need to create the audio files in a <code>www</code> folder in your Shiny app, but reference them in the <code>&lt;audio&gt;</code> HTML5 tag without <code>www</code> - see example below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">output<span class="op">$</span>talk &lt;-<span class="st"> </span><span class="kw">renderUI</span>({

  <span class="co"># to prevent browser caching, create a new audio filename each play</span>
  <span class="co"># create within the www folder of the Shiny app</span>
  output_file &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">"www"</span>, <span class="kw">basename</span>(<span class="kw">tempfile</span>(<span class="dt">fileext =</span> <span class="st">".wav"</span>))

  <span class="co"># replace with your reactive text input</span>
  <span class="kw"><a href="../reference/gl_talk.html">gl_talk</a></span>(<span class="st">"This will autoplay in my Shiny app"</span>, 
          <span class="dt">output =</span> output_file)

  <span class="co"># creates HTML5 audio player</span>
  <span class="co"># the audio file sits in folder www, but the audio file must be referenced without www</span>
  tags<span class="op">$</span><span class="kw">audio</span>(<span class="dt">autoplay =</span> <span class="ot">NA</span>, <span class="dt">controls =</span> <span class="ot">NA</span>, tags<span class="op">$</span><span class="kw">source</span>(<span class="dt">src =</span> <span class="kw">basename</span>(output_file)))

<span class="er">}</span>)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://code.markedmondson.me">Mark Edmondson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
