<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Google Natural Language API • googleLanguageR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Google Natural Language API">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47480439-2', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">googleLanguageR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/translation.html">
    <span class="fa fa-globe fa-lg"></span>
     
    Translation API
  </a>
</li>
<li>
  <a href="../articles/nlp.html">
    <span class="fa fa-object-group fa-lg"></span>
     
    NLP API
  </a>
</li>
<li>
  <a href="../articles/speech.html">
    <span class="fa fa-comment fa-lg"></span>
     
    Speech API
  </a>
</li>
<li>
  <a href="../articles/text-to-speech.html">
    <span class="fa fa-phone fa-lg"></span>
     
    Text-to-Speech API
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">
        <span class="fa fa-info"></span>
         
        Function Reference
      </a>
    </li>
    <li>
      <a href="https://cloud.google.com/products/machine-learning/">
        <span class="fa fa-google"></span>
         
        Google Documentation
      </a>
    </li>
    <li>
      <a href="https://github.com/ropensci/googleLanguageR">
        <span class="fa fa-github"></span>
         
        Development site
      </a>
    </li>
    <li>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSerjirmMpB3b7LmBs_Vx_XPIE9IrhpCpPg1jUcpfBcivA3uBw/viewform">
        <span class="fa fa-slack"></span>
         
        Slack Support Channel
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Google Natural Language API</h1>
                        <h4 class="author">Mark Edmondson</h4>
            
            <h4 class="date">2018-04-05</h4>
      
      
      <div class="hidden name"><code>nlp.Rmd</code></div>

    </div>

    
    
<p>The Google Natural Language API reveals the structure and meaning of text by offering powerful machine learning models in an easy to use REST API. You can use it to extract information about people, places, events and much more, mentioned in text documents, news articles or blog posts. You can also use it to understand sentiment about your product on social media or parse intent from customer conversations happening in a call center or a messaging app.</p>
<p>Read more <a href="https://cloud.google.com/natural-language/">on the Google Natural Language API</a></p>
<p>The Natural Language API returns natural language understanding technologies. You can call them individually, or the default is to return them all. The available returns are:</p>
<ul>
<li>
<em>Entity analysis</em> - Finds named entities (currently proper names and common nouns) in the text along with entity types, salience, mentions for each entity, and other properties. If possible, will also return metadata about that entity such as a Wikipedia URL. If using the <strong>v1beta2</strong> endpoint this also includes sentiment for each entity.</li>
<li>
<em>Syntax</em> - Analyzes the syntax of the text and provides sentence boundaries and tokenization along with part of speech tags, dependency trees, and other properties.</li>
<li>
<em>Sentiment</em> - The overall sentiment of the text, represented by a magnitude <code>[0, +inf]</code> and score between <code>-1.0</code> (negative sentiment) and <code>1.0</code> (positive sentiment).</li>
</ul>
<div id="demo-for-entity-analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#demo-for-entity-analysis" class="anchor"></a>Demo for Entity Analysis</h3>
<p>You can pass a vector of text which will call the API for each element. The return is a list of responses, each response being a list of tibbles holding the different types of analysis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(googleLanguageR)

texts &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"to administer medicince to animals is frequently a very difficult matter,</span>
<span class="st">         and yet sometimes it's necessary to do so"</span>, 
         <span class="st">"I don't know how to make a text demo that is sensible"</span>)
nlp_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gl_nlp.html">gl_nlp</a></span>(texts)</code></pre></div>
<p>Each text has its own entry in returned tibbles</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(nlp_result, <span class="dt">max.level =</span> <span class="dv">2</span>)
<span class="co">#List of 6</span>
<span class="co"># $ sentences        :List of 2</span>
<span class="co">#  ..$ :'data.frame':   1 obs. of  4 variables:</span>
<span class="co">#  ..$ :'data.frame':   1 obs. of  4 variables:</span>
<span class="co"># $ tokens           :List of 2</span>
<span class="co">#  ..$ :'data.frame':   21 obs. of  17 variables:</span>
<span class="co">#  ..$ :'data.frame':   13 obs. of  17 variables:</span>
<span class="co"># $ entities         :List of 2</span>
<span class="co">#  ..$ :Classes ‘tbl_df’, ‘tbl’ and 'data.frame':   3 obs. of  9 variables:</span>
<span class="co">#  ..$ :Classes ‘tbl_df’, ‘tbl’ and 'data.frame':   1 obs. of  9 variables:</span>
<span class="co"># $ language         : chr [1:2] "en" "en"</span>
<span class="co"># $ text             : chr [1:2] "to administer medicince to animals is frequently a very difficult matter,\n   #      and yet sometimes it's necessary to do so" "I don't know how to make a text demo that is sensible"</span>
<span class="co"># $ documentSentiment:Classes ‘tbl_df’, ‘tbl’ and 'data.frame': 2 obs. of  2 variables:</span>
<span class="co">#  ..$ magnitude: num [1:2] 0.5 0.3</span>
<span class="co">#  ..$ score    : num [1:2] 0.5 -0.3</span></code></pre></div>
<p>Sentence structure and sentiment:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## sentences structure
nlp_result<span class="op">$</span>sentences[[<span class="dv">2</span>]]
<span class="co">#                                                content beginOffset magnitude score</span>
<span class="co">#1 I don't know how to make a text demo that is sensible           0       0.3  -0.3</span></code></pre></div>
<p>Information on what words (tokens) are within each text:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># word tokens data</span>
<span class="kw">str</span>(nlp_result<span class="op">$</span>tokens[[<span class="dv">1</span>]])
<span class="co">#'data.frame':  6 obs. of  17 variables:</span>
<span class="co"># $ content       : chr  "to" "administer" "medicince" "to" ...</span>
<span class="co"># $ beginOffset   : int  0 3 14 24 27 35</span>
<span class="co"># $ tag           : chr  "PRT" "VERB" "NOUN" "ADP" ...</span>
<span class="co"># $ aspect        : chr  "ASPECT_UNKNOWN" "ASPECT_UNKNOWN" "ASPECT_UNKNOWN" "ASPECT_UNKNOWN" ...</span>
<span class="co"># $ case          : chr  "CASE_UNKNOWN" "CASE_UNKNOWN" "CASE_UNKNOWN" "CASE_UNKNOWN" ...</span>
<span class="co"># $ form          : chr  "FORM_UNKNOWN" "FORM_UNKNOWN" "FORM_UNKNOWN" "FORM_UNKNOWN" ...</span>
<span class="co"># $ gender        : chr  "GENDER_UNKNOWN" "GENDER_UNKNOWN" "GENDER_UNKNOWN" "GENDER_UNKNOWN" ...</span>
<span class="co"># $ mood          : chr  "MOOD_UNKNOWN" "MOOD_UNKNOWN" "MOOD_UNKNOWN" "MOOD_UNKNOWN" ...</span>
<span class="co"># $ number        : chr  "NUMBER_UNKNOWN" "NUMBER_UNKNOWN" "SINGULAR" "NUMBER_UNKNOWN" ...</span>
<span class="co"># $ person        : chr  "PERSON_UNKNOWN" "PERSON_UNKNOWN" "PERSON_UNKNOWN" "PERSON_UNKNOWN" ...</span>
<span class="co"># $ proper        : chr  "PROPER_UNKNOWN" "PROPER_UNKNOWN" "PROPER_UNKNOWN" "PROPER_UNKNOWN" ...</span>
<span class="co"># $ reciprocity   : chr  "RECIPROCITY_UNKNOWN" "RECIPROCITY_UNKNOWN" "RECIPROCITY_UNKNOWN" "RECIPROCITY_UNKNOWN" #...</span>
<span class="co"># $ tense         : chr  "TENSE_UNKNOWN" "TENSE_UNKNOWN" "TENSE_UNKNOWN" "TENSE_UNKNOWN" ...</span>
<span class="co"># $ voice         : chr  "VOICE_UNKNOWN" "VOICE_UNKNOWN" "VOICE_UNKNOWN" "VOICE_UNKNOWN" ...</span>
<span class="co"># $ headTokenIndex: int  1 5 1 1 3 5</span>
<span class="co"># $ label         : chr  "AUX" "CSUBJ" "DOBJ" "PREP" ...</span>
<span class="co"># $ value         : chr  "to" "administer" "medicince" "to" ...</span></code></pre></div>
<p>What entities within text have been identified, with optional wikipedia URL if its available.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nlp_result<span class="op">$</span>entities
<span class="co">#[[1]]</span>
<span class="co"># A tibble: 3 x 9</span>
<span class="co">#       name  type  salience    mid wikipedia_url magnitude score beginOffset mention_type</span>
<span class="co">#      &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;fctr&gt;        &lt;fctr&gt;     &lt;dbl&gt; &lt;dbl&gt;       &lt;int&gt;        &lt;chr&gt;</span>
<span class="co">#1   animals OTHER 0.2449778   &lt;NA&gt;          &lt;NA&gt;        NA    NA          27       COMMON</span>
<span class="co">#2    matter OTHER 0.2318689   &lt;NA&gt;          &lt;NA&gt;        NA    NA          66       COMMON</span>
<span class="co">#3 medicince OTHER 0.5231533   &lt;NA&gt;          &lt;NA&gt;        NA    NA          14       COMMON</span>

<span class="co">#[[2]]</span>
<span class="co"># A tibble: 1 x 9</span>
<span class="co">#       name        type salience    mid wikipedia_url magnitude score beginOffset mention_type</span>
<span class="co">#      &lt;chr&gt;       &lt;chr&gt;    &lt;int&gt; &lt;fctr&gt;        &lt;fctr&gt;     &lt;dbl&gt; &lt;dbl&gt;       &lt;int&gt;        &lt;chr&gt;</span>
<span class="co">#1 text demo WORK_OF_ART        1   &lt;NA&gt;          &lt;NA&gt;        NA    NA          27       COMMON</span></code></pre></div>
<p>Sentiment of the entire text:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nlp_result<span class="op">$</span>documentSentiment
<span class="co"># A tibble: 2 x 2</span>
  magnitude score
      <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span>
<span class="dv">1</span>       <span class="fl">0.5</span>   <span class="fl">0.5</span>
<span class="dv">2</span>       <span class="fl">0.3</span>  <span class="op">-</span><span class="fl">0.3</span></code></pre></div>
<p>The language for the text:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nlp_result<span class="op">$</span>language
<span class="co"># [1] "en" "en"</span></code></pre></div>
<p>The original passed in text, to aid with working with the output:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nlp_result<span class="op">$</span>text
<span class="co"># [1] "to administer medicince to animals is frequently a very difficult matter,\n         and yet sometimes  it's necessary to do so"</span>
<span class="co"># [2] "I don't know how to make a text demo that is sensible"  </span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://code.markedmondson.me">Mark Edmondson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
